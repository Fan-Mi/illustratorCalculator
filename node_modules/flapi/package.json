{
  "name": "flapi",
  "version": "1.1.0",
  "author": {
    "name": "Joe Longstreet"
  },
  "homepage": "https://github.com/joelongstreet/flapi",
  "repository": {
    "type": "git",
    "url": "git+ssh://git@github.com/joelongstreet/flapi.git"
  },
  "main": "./index",
  "license": "MIT",
  "description": "A fully testable, dependency light, Flickr API wrapper. Authenticates and makes web requests",
  "keywords": [
    "flickr",
    "flapi",
    "api",
    "oauth",
    "upload",
    "photo"
  ],
  "scripts": {
    "test": "make test"
  },
  "engines": {
    "node": ">=0.8.0"
  },
  "devDependencies": {
    "mocha": "~1.14.0",
    "should": "~2.1.0",
    "jsdom": "~0.8.8",
    "request": "~2.27.0"
  },
  "dependencies": {
    "restler": "~2.0.1"
  },
  "readme": "# Flapi [![Build Status](https://travis-ci.org/joelongstreet/flapi.png)](https://travis-ci.org/joelongstreet/flapi) [![NPM version](https://badge.fury.io/js/flapi.png)](http://badge.fury.io/js/flapi) [![Code Climate](https://codeclimate.com/github/joelongstreet/flapi.png)](https://codeclimate.com/github/joelongstreet/flapi)\n\n## Feature Set\nI know there are several existing node flickr modules, but... I thought the community could use one with the following features:\n\n* Simple api wrapper\n* Fully tested\n* Oauth support\n* Extra light dependency tree\n* Example code\n\n\n### Quick Start (...quickish)\n1 - Instantiate the flapi client:\n``` javascript\nvar Flapi = require('flapi');\nvar flapiClient = new Flapi({\n  oauth_consumer_key    : FLICKR_KEY,\n  oauth_consumer_secret : FLICKR_SECRET\n});\n```\n\n2 - Listen for an http request from flickr and respond\n``` javascript\nvar server = http.createServer(function(req, res){\n  res.writeHead(200, {'Content-Type': 'text/plain'});\n  res.end();\n});\n```\n\n3 - Authenticate your application\n``` javascript\nflapiClient.authApp('http://localhost:3000/auth_callback');\n```\n\n4 - When application authentication is finished, prompt users to authenticate with your app by giving them the app auth url.\n``` javascript\nvar url = flapiClient.getUserAuthURL();\n```\n\n5 - Get the user's access token to make individual requests.\n``` javascript\nvar userAccessToken;\nflapiClient.getUserAccessToken(function(accessToken){\n  userAccessToken = accessToken;\n});\n```\n\n6 - Make requests on the user's behalf\n``` javascript\nflapiClient.api({\n  method      : 'flickr.people.getPhotos',\n  params      :  { user_id : userAccessToken.user_nsid },\n  accessToken : userAccessToken,\n  next        : function(data){\n      console.log('User Photos: ', data)\n  }\n});\n```\n\n\n\n## Making API requests\nOnce you've authorized your application and have permissions from a user, you should be able to make api requests on their behalf.\n\nWith the exception of photo uploading, all api methods match the [flickr documentation](http://www.flickr.com/services/api/). To get a [listing of photos](http://www.flickr.com/services/api/flickr.people.getPhotos.html), you'll need a `user_id` and the user's access token (the `api_key` is automatically sent via the access token). The request can be completed with the following:\n\n``` javascript\nflapiClient.api({\n  method      : 'flickr.people.getPhotos',\n  params      :  { user_id : userAccessToken.user_nsid },\n  accessToken : userAccessToken,\n  next        : function(data){\n      console.log('User Photos: ', data)\n  }\n});\n```\n\n* `method` - The flickr API Method\n* `params` - Any API options to send\n* `accessToken` - A user's unique access token\n* `next` - The callback used when the api call is complete\n\n\n### Uploading Photos\nTo upload a photo, use the method `upload` and pass the file path as param. Example:\n\n``` javascript\nflapiClient.api({\n  method      : 'upload',\n  params      :  { photo : 'test/image.jpg' },\n  accessToken : userAccessToken,\n  next        : function(data){\n      console.log('New Photo: ', data)\n  }\n});\n```\n\n\n### Setting Application permissions\nAccording to the [flickr documentation](http://www.flickr.com/services/api/), you should be able to set your application's permission set (`read`, `write`, or `delete`) from the edit screen of your app. I've never been able to find these settings. Instead, you can set it in the flickr module constructor with the `perms` option:\n\n``` javascript\nvar flapiClient = new Flapi({\n  oauth_consumer_key    : FLICKR_KEY,\n  oauth_consumer_secret : FLICKR_SECRET,\n  perms                 : 'delete'\n});\n```\n\n\n### Unauthorized API Requests\nSome of flickr's api methods don't require authorization (ex: `flickr.cameras.getBrandModels` and `flickr.interestingness.getList`). To use these without user authentication, omit the `accessToken` option from the api call:\n\n``` javascript\nflapiClient.api({\n  method : 'flickr.interestingness.getList',\n  params : { brand : 'apple' },\n  next   : function(data){\n    console.log('TADA!', data)\n  }\n});\n```\n\n\n### Handling Errors\nAPI errors are passed directly to the next function. You can catch them by checking the stat property of the data returned. In most scenarios a message property should also be passed.\n``` javascript\nflapiClient.api({\n  method : 'flickr.class.method',\n  params : {},\n  next   : function(data){\n    if(data.stat == 'fail'){\n      console.log(data.code);\n      console.log(data.message);\n    }\n  }\n});\n```\n\n\n### Other Notes\nIf you're looking to have a client make the http request, delay the request for some reason, or want to handle the request on your own... you can prevent the call to flickr by passing the option `preventCall : true`. Regardless of this option, the full url of the intended request will always be passed back.\n``` javascript\n  var flickrAPIurl = flapiClient.api({\n    method      : 'flickr.people.getPhotos',\n    params      : { user_id : this.accessToken.user_nsid },\n    accessToken : this.accessToken,\n    preventCall : true\n  });\n```\n\n\n\n## Data Persistence \nTo keep users from having to authenticate every time your node application restarts, you'll need to persist your application's `oauth_token` and `oauth_token_secret` as well as each user's individual `access_token`.\n\nTo instantiate the client with a token and secret, pass those properties when creating the object.\n\n``` javascript\nvar flapiClient = new Flapi({\n  oauth_consumer_key    : FLICKR_KEY,\n  oauth_consumer_secret : FLICKR_SECRET,\n  oauth_token           : FLICKR_OAUTH_TOKEN,\n  oauth_token_secret    : FLICKR_OAUTH_TOKEN_SECRET\n});\n```\n\nYou only need to authorize your application once. If you're passing the token and secret, you can skip steps 2 and 3 described in the quick start above.\n\n\n\n## Examples\nUsing this module within express or any other node server framework should be fairly straight forward. Check out the examples directory of this project for more details.\n\n\n\n## Running the Tests\nTo run the tests, please make sure you've installed the project's dev dependencies and have the following environment variables set:\n\n* `FLICKR_KEY` - Your flickr application's key\n* `FLICKR_SECRET` - Your flickr application's secret\n* `FLICKR_USERNAME` - Your flickr user name, used to simulate a yahoo and flickr app authentication flow\n* `FLICKR_PASSWORD` - Your flickr password, used to simulate a yahoo and flickr app authentication flow\n\n### With Auth\nCalling `make test` from the root of the project will run all tests in the correct order.\n\nOn occasion, the numerous flickr redirects required to simulate authentication will fail. This causes every subsequent test to then fail. If you're running tests and experience this oddity, just run again.\n\n### Without Auth\nYou can skip the auth steps and still test all the API methods by running `make test-without-auth`. For this to work, you'll also need the following environment variables set:\n\n* `FLICKR_OAUTH_USER_TOKEN` - Can retrieve this from the standard auth above.\n* `FLICKR_OAUTH_USER_SECRET` - Can retrieve this from the standard auth above.\n* `FLICKR_NSID` - Can retrieve this from the standard auth above.\n* `FLICKR_USERNAME` - Not currently used in the tests, but good to include anyways",
  "readmeFilename": "README.md",
  "_id": "flapi@1.1.0",
  "dist": {
    "shasum": "44466bd9fe47516f68a7c8d713d491a5d248bfca",
    "tarball": "http://registry.npmjs.org/flapi/-/flapi-1.1.0.tgz"
  },
  "_from": "flapi@*",
  "_npmVersion": "1.2.15",
  "_npmUser": {
    "name": "joelongstreet",
    "email": "joelongstreet@gmail.com"
  },
  "maintainers": [
    {
      "name": "joelongstreet",
      "email": "joelongstreet@gmail.com"
    }
  ],
  "directories": {},
  "_shasum": "44466bd9fe47516f68a7c8d713d491a5d248bfca",
  "_resolved": "https://registry.npmjs.org/flapi/-/flapi-1.1.0.tgz",
  "bugs": {
    "url": "https://github.com/joelongstreet/flapi/issues"
  }
}
